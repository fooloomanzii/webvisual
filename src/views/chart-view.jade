doctype html
html
  head
    title Webvisual
    meta(name='viewport', charset='utf-8', content='width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.8')
    script(src='components/webcomponentsjs/webcomponents-lite.js')
    script(type='text/javascript').
      // actual measuring system
      var Name = !{JSON.stringify(name)};
      // performance
      window.Polymer = {
        dom: 'shady',
        lazyRegister: true
      };
    script(src='socket.io/socket.io.js')
    script(src='js/data-socket-repeater.js')
    link(rel='import', href='components/polymer/polymer.html')
    link(rel="import", href="style/app-theme.html")
    link(rel='import', href='elements/imports.html')
  style(is="custom-style", include="app-theme").
    body {
      height: 100%;
      width: 100%;
      padding: 0;
      margin: 0;
      background: var(--bright-primary-color);
    }
    div#background {
      background: radial-gradient(rgba(0,91,130,1) 80%, rgba(0,91,130,0.8));
    }
    .fullbleed {
      height: 100%;
      width: 100%;
      top: 0;
      left: 0;
      position: absolute;
    }
    section.circles svg {
      height: calc((10vw + 5vh)/2);
      stroke: rgba(255, 255, 255, 0.25);
      stroke-width: 0.5px;
    }
    section.circles {
      z-index: 0;
      position: fixed;
      top: calc(50% - 10vw - 5vh);
      left: 50%;
      display: flex;
      flex-direction: row;
      justify-content: center;
      -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none;
      -webkit-touch-callout: none; -webkit-tap-highlight-color:rgba(0,0,0,0);
    }
    section#spinner.circles section.outer {
      animation-name: outer-animation;
      animation-duration: 2.5s;
      animation-timing-function: linear;
      animation-iteration-count: infinite;
      position: fixed;
      transform-origin: 0% 200%;
    }
    section.outer svg {
      animation-name: inner-animation;
      animation-duration: 2.5s;
      animation-timing-function: linear;
      animation-iteration-count: infinite;
      opacity: 0;
    }
    section.outer:nth-child(1), section.outer:nth-child(1) svg { animation-delay: 0.0s; fill: #E41A1A; }
    section.outer:nth-child(2), section.outer:nth-child(2) svg { animation-delay: 0.5s; fill: #E45D1A; }
    section.outer:nth-child(3), section.outer:nth-child(3) svg { animation-delay: 1.0s; fill: #E4D61A; }
    section.outer:nth-child(4), section.outer:nth-child(4) svg { animation-delay: 1.5s; fill: #67E41A; }
    section.outer:nth-child(5), section.outer:nth-child(5) svg { animation-delay: 2.0s; fill: #39C5ff; }
    @keyframes inner-animation {
      0%   {opacity: 0.8; transform: rotate(0deg) scale(0.5);}
      50%  {opacity: 1; transform: rotate(180deg) scale(1);}
      100% {opacity: 0.8; transform: rotate(360deg) scale(0.5);}
    }
    @keyframes outer-animation {
      0%   {transform: rotate(0deg)}
      50%  {transform: rotate(-180deg)}
      100% {transform: rotate(-360deg)}
    }
    chart-element {
      background: var(--background-1);
      color: var(--primary-text-color);
      width: 100%;
    }
    chart-element[dark] {
      background: var(--background-4);
      color: var(--primary-text-color);
    }
    main-page {
      --app-content-background: var(--background-3);
      --dark-app-content-background: var(--bright-primary-color);
      --app-toolbar-max-height: 35vh;
    }

  body.fullbleed
    //- START-ANIMATION
    #background.fullbleed
    section#spinner.circles
      each val in [1, 2, 3, 4, 5]
        section.outer
          svg(viewbox='0 0 48 48')
            g#g00(transform='matrix(0.41959876,0,0,-0.41984392,0,55.269513)')
              g#g01(transform='scale(0.1,0.1)')
                path#Logo(d='m 503.402,705.496 c 0.157,-0.098 4.418,8.078 7.868,13.918 28.031,47.383 198.16,468.966 239.82,568.246 -56.34,18.57 -116.543,28.77 -179.125,28.77 C 256.07,1316.43 0,1060.49 0,744.762 0,692.703 7.10547,642.328 20.1484,594.41 c 35.9102,23.352 254.79,174.738 255.118,173.672 35.054,-129.023 153.136,-195.555 228.136,-62.586 z M 1009.09,1113.29 C 966.109,1011.68 821.477,670.809 782.699,594.098 706.316,455.242 584.27,325.691 418.922,318.25 224.848,309.52 122.07,383.562 66.746,476.805 162.832,296.16 353.012,173.148 571.965,173.148 c 315.91,0 571.985,255.942 571.985,571.614 0,140.48 -50.81,269.008 -134.86,368.528')

    neon-animated-pages#PageSelector.fullbleed(selected="0", animate-initial-selection, hidden)
      //- LABEL SELECTION PAGE
      select-page.fullbleed()
        each Label in config.labels
          radio-button-element.labelButton(label!= Label)
            != Label
      //- MAIN-PAGE
      main-page.fullbleed(animated!= (!mobile), force-opened, multi-select, toggles)
        //- TABS
        each Label in config.labels
          tab-element.label(label!= Label)
            != Label

        //- Elements for TOOLBAR 
        //- sign-element.toolbar-footer(horizontal)
        //- table-element.toolbar-footer(highlight-exceeding)
        chart-element.toolbar-footer()
          each Label in config.labels
            each Elements, Id in config.elements[Label]
              graph-element(label!= Label, 
                            id!= Id,
                            color!= config.elements[Label][Id].color)

        //- GROUPINGKEY SELECTORS
        each Label in config.labels
          iron-selector.groupingKeySelector(attr-for-selected= "groupingkey", selected-attribute= "checked", selected!= config.preferedGroupingKeys[Label], fallback-selection!= config.preferedGroupingKeys[Label], activate-event="change")
            each GroupingKey in config.groupingKeys[Label]
              radio-button-element.lightcontext.groupingKey(groupingkey!= GroupingKey)
                != GroupingKey

        //- PANELS
        each Label in config.labels
          section.panel(label!= Label, animated!= (!mobile))
            each Subgroup, Titel in config.groups[Label][config.preferedGroupingKeys[Label]]
              group-card(title= Titel)
                each Id, i in Subgroup.ids
                  element-checkbox(label!= Label,
                               id!= Id, 
                               is-boolean!= config.elements[Label][Id].isBoolean, 
                               unit!= config.elements[Label][Id].unit, 
                               keys= JSON.stringify(config.elements[Label][Id].keys),
                               prefered-key!= config.preferedGroupingKeys[Label]
                               caption-keys= JSON.stringify(config.groupingKeys[Label]),
                               show-date!= (!mobile),
                               color!= config.elements[Label][Id].color,
                               bubbles, 
                               selectable, 
                               checked)

    script.
    
      var PageSelector;
      var MainPage;
      window.addEventListener('WebComponentsReady', function(e) {
        try {
          var el = document.getElementById('spinner');
          el.parentNode.removeChild(el);
        }
        catch(err){
        }
        PageSelector = document.querySelector('neon-animated-pages#PageSelector');
        PageSelector.removeAttribute('hidden');
        MainPage = document.querySelector('main-page');
      });
